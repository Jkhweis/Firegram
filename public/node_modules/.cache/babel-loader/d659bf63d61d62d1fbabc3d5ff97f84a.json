{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\nimport { projectStorage } from '../firebase/config';\n\nconst useStorage = file => {\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState(null);\n  const [url, setUrl] = useState(null);\n  useEffect(() => {\n    const storageRef = ref(projectStorage, file.name);\n    const uploadTask = uploadBytesResumable(storageRef, file);\n    uploadTask.on('state_changed', snapshot => {\n      let percentage = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n      setProgress(percentage);\n    }, err => {\n      setError(err);\n    }, () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(url => setUrl(url));\n    });\n  }, [file]);\n  return {\n    progress,\n    url,\n    error\n  };\n};\n\nexport default useStorage;","map":{"version":3,"sources":["/Users/joykhalil/Desktop/React Projects/firegram/src/hooks/useStorage.js"],"names":["useState","useEffect","ref","uploadBytesResumable","getDownloadURL","projectStorage","useStorage","file","progress","setProgress","error","setError","url","setUrl","storageRef","name","uploadTask","on","snapshot","percentage","bytesTransferred","totalBytes","err","then"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,GAAT,EAAcC,oBAAd,EAAoCC,cAApC,QAA0D,kBAA1D;AACA,SAASC,cAAT,QAA+B,oBAA/B;;AAEA,MAAMC,UAAU,GAAIC,IAAD,IAAU;AAC3B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACY,GAAD,EAAMC,MAAN,IAAgBb,QAAQ,CAAC,IAAD,CAA9B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,UAAU,GAAGZ,GAAG,CAACG,cAAD,EAAiBE,IAAI,CAACQ,IAAtB,CAAtB;AAEA,UAAMC,UAAU,GAAGb,oBAAoB,CAACW,UAAD,EAAaP,IAAb,CAAvC;AAEAS,IAAAA,UAAU,CAACC,EAAX,CACE,eADF,EAEGC,QAAD,IAAc;AACZ,UAAIC,UAAU,GACXD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GADtD;AAEAZ,MAAAA,WAAW,CAACU,UAAD,CAAX;AACD,KANH,EAOGG,GAAD,IAAS;AACPX,MAAAA,QAAQ,CAACW,GAAD,CAAR;AACD,KATH,EAUE,MAAM;AACJlB,MAAAA,cAAc,CAACY,UAAU,CAACE,QAAX,CAAoBhB,GAArB,CAAd,CAAwCqB,IAAxC,CAA8CX,GAAD,IAASC,MAAM,CAACD,GAAD,CAA5D;AACD,KAZH;AAcD,GAnBQ,EAmBN,CAACL,IAAD,CAnBM,CAAT;AAqBA,SAAO;AAAEC,IAAAA,QAAF;AAAYI,IAAAA,GAAZ;AAAiBF,IAAAA;AAAjB,GAAP;AACD,CA3BD;;AA6BA,eAAeJ,UAAf","sourcesContent":["import { useState, useEffect } from 'react';\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\nimport { projectStorage } from '../firebase/config';\n\nconst useStorage = (file) => {\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState(null);\n  const [url, setUrl] = useState(null);\n\n  useEffect(() => {\n    const storageRef = ref(projectStorage, file.name);\n\n    const uploadTask = uploadBytesResumable(storageRef, file);\n\n    uploadTask.on(\n      'state_changed',\n      (snapshot) => {\n        let percentage =\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        setProgress(percentage);\n      },\n      (err) => {\n        setError(err);\n      },\n      () => {\n        getDownloadURL(uploadTask.snapshot.ref).then((url) => setUrl(url));\n      }\n    );\n  }, [file]);\n\n  return { progress, url, error };\n};\n\nexport default useStorage;\n"]},"metadata":{},"sourceType":"module"}